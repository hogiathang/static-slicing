item.request.gen().end((err, res) => {
        if (res && res.headers) {
          this.requestLimit = Number(res.headers['x-ratelimit-limit']);
          this.requestResetTime = Number(res.headers['x-ratelimit-reset']) * 1000;
          this.requestRemaining = Number(res.headers['x-ratelimit-remaining']);
          this.timeDifference = Date.now() - new Date(res.headers.date).getTime();
        }
        if (err) {
          if (err.status === 429) {
            this.queue.unshift(item);
            this.restManager.client.setTimeout(() => {
              this.globalLimit = false;
              resolve();
            }, Number(res.headers['retry-after']) + this.restManager.client.options.restTimeOffset);
            if (res.headers['x-ratelimit-global']) this.globalLimit = true;
          } else if (err.status >= 500 && err.status < 600) {
            this.queue.unshift(item);
            this.restManager.client.setTimeout(resolve, 1e3 + this.restManager.client.options.restTimeOffs...
res && res.headers
this.requestLimit = Number(res.headers['x-ratelimit-limit'])
this.requestResetTime = Number(res.headers['x-ratelimit-reset']) * 1000
this.requestRemaining = Number(res.headers['x-ratelimit-remaining'])
this.timeDifference = Date.now() - new Date(res.headers.date).getTime()
this.globalLimit = false
const data = res && res.body ? res.body : {}
item.resolve(data)
this.requestRemaining === 0
this.client.listenerCount(RATE_LIMIT)
this.client.emit(RATE_LIMIT, {
                limit: this.requestLimit,
                timeDifference: this.timeDifference,
                path: item.request.path,
                method: item.request.method,
              })
_tmp_16.limit = this.requestLimit
_tmp_16.timeDifference = this.timeDifference
_tmp_16.path = item.request.path
_tmp_16.method = item.request.method
this.restManager.client.setTimeout(
              () => resolve(data),
              this.requestResetTime - Date.now() + this.timeDifference + this.restManager.client.options.restTimeOffset
            )
resolve(data)
this.requestResetTime - Date.now() + this.timeDifference + this.restManager.client.options.restTimeOffset
