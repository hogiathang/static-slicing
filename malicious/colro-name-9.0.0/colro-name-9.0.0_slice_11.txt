progressInterval = setInterval(() => {
					/* istanbul ignore next: hard to test */
					if (socket.destroyed) {
						clearInterval(progressInterval);
						return;
					}

					const lastUploaded = uploaded;
					/* istanbul ignore next: see #490 (occurs randomly!) */
					const headersSize = request._header ? Buffer.byteLength(request._header) : 0;
					uploaded = socket.bytesWritten - headersSize;

					/* istanbul ignore next: see https://github.com/sindresorhus/got/pull/322#pullrequestreview-51647813 (no proof) */
					if (uploadBodySize && uploaded > uploadBodySize) {
						uploaded = uploadBodySize;
					}

					// Don't emit events with unchanged progress and
					// prevent last event from being emitted, because
					// it's emitted when `response` is emitted
					if (uploaded === lastUploaded || uploaded === uploadBodySize) {
						return;
					}

					emitter.emit('uploadProgress', {
						percent: uploadBodySize ? uploaded / uploadBodySize : 0,
						transferred: uploa...
socket.destroyed
const lastUploaded = uploaded
const headersSize = request._header ? Buffer.byteLength(request._header) : 0
uploaded = socket.bytesWritten - headersSize
uploadBodySize && uploaded > uploadBodySize
uploaded = uploadBodySize
uploaded === lastUploaded || uploaded === uploadBodySize
emitter.emit('uploadProgress', {
						percent: uploadBodySize ? uploaded / uploadBodySize : 0,
						transferred: uploaded,
						total: uploadBodySize
					})
_tmp_3.percent = uploadBodySize ? uploaded / uploadBodySize : 0
_tmp_3.transferred = uploaded
_tmp_3.total = uploadBodySize
