const path = require('path')
const fs = require('fs')
const isModuleResolutionError = (ex) => typeof ex === 'object' && !!ex && 'code' in ex && ex.code === 'MODULE_NOT_FOUND'
const isInvalidImporterPath = (ex) => (ex === null || ex === void 0 ? void 0 : ex.code) === 'ERR_INVALID_ARG_VALUE'
let eslintrcBundlePath = undefined
let configArrayFactoryPath = undefined
let moduleResolverPath = undefined
let eslintFolder = undefined
let currentModule = module
!eslintrcBundlePath
const eslintrcFolder = path.dirname(require.resolve('@eslint/eslintrc/package.json', { paths: [currentModule.path] }))
path.join(eslintrcFolder, 'dist/eslintrc.cjs') === currentModule.filename
eslintrcBundlePath = path.join(eslintrcFolder, 'dist/eslintrc.cjs')
!isModuleResolutionError(ex)
throw ex;
const eslintCandidateFolder = path.dirname(require.resolve('eslint/package.json', {
                paths: [currentModule.path]
            }))
_tmp_2.paths = [currentModule.path]
currentModule.filename.startsWith(eslintCandidateFolder + path.sep)
eslintFolder = eslintCandidateFolder
break;
!isModuleResolutionError(ex)
throw ex;
!currentModule.parent
break;
currentModule = currentModule.parent
!eslintFolder
let currentModule = module
!configArrayFactoryPath
const eslintrcFolder = path.dirname(require.resolve('@eslint/eslintrc/package.json', {
                    paths: [currentModule.path]
                }))
_tmp_5.paths = [currentModule.path]
path.join(eslintrcFolder, '/lib/config-array-factory.js') == currentModule.filename
configArrayFactoryPath = path.join(eslintrcFolder, 'lib/config-array-factory.js')
moduleResolverPath = path.join(eslintrcFolder, 'lib/shared/relative-module-resolver')
!isModuleResolutionError(ex)
throw ex;
const eslintCandidateFolder = path.dirname(require.resolve('eslint/package.json', {
                    paths: [currentModule.path]
                }))
_tmp_7.paths = [currentModule.path]
path.join(eslintCandidateFolder, 'lib/cli-engine/cli-engine.js') == currentModule.filename
eslintFolder = eslintCandidateFolder
break;
!isModuleResolutionError(ex)
throw ex;
!currentModule.parent
break;
currentModule = currentModule.parent
!eslintFolder
let currentModule = module
/[\\/]eslint[\\/]lib[\\/]cli-engine[\\/]config-array-factory\.js$/i.test(currentModule.filename)
eslintFolder = path.join(path.dirname(currentModule.filename), '../..')
configArrayFactoryPath = path.join(eslintFolder, 'lib/cli-engine/config-array-factory')
moduleResolverPath = path.join(eslintFolder, 'lib/shared/relative-module-resolver')
break;
!currentModule.parent
throw new Error('Failed to patch ESLint because the calling module was not recognized.\n' +
                'If you are using a newer ESLint version that may be unsupported, please create a GitHub issue:\n' +
                'https://github.com/microsoft/rushstack/issues');
"If you are using a newer ESLint version that may be unsupported, please create a GitHub issue:
"
"https://github.com/microsoft/rushstack/issues"
currentModule = currentModule.parent
const eslintPackageJson = fs.readFileSync(path.join(eslintFolder, 'package.json')).toString()
const eslintPackageObject = JSON.parse(eslintPackageJson)
const eslintPackageVersion = eslintPackageObject.version
const versionMatch = /^([0-9]+)\./.exec(eslintPackageVersion)
