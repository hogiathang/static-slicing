var connect = ({request}) => ({provider, input, input:{session}, output}) =>
    provider.oauth === 1
  ? compose(
      oauth1.request({request}),
      ({provider, input, input:{session}, output}) => (
        session.request = output,
        oauth1.authorize({provider, input, output})
      )
    )({provider, input})

  : provider.oauth === 2
  ? (
    session.state = provider.state,
    session.nonce = provider.nonce,
    session.code_verifier = provider.code_verifier,
    oauth2.authorize({provider, input})
  )

  : (
    output = {error: 'Grant: missing or misconfigured provider'},
    {provider, input, output}
  )
provider.oauth === 1 ? compose(
      oauth1.request({request}),
      ({provider, input, input:{session}, output}) => (
        session.request = output,
        oauth1.authorize({provider, input, output})
      )
    )({provider, input}) : provider.oauth === 2 ? session.state = provider.state,
    session.nonce = provider.nonce,
    session.code_verifier = provider.code_verifier,
    oauth2.authorize({provider, input}) : output = {error: 'Grant: missing or misconfigured provider'},
    {provider, input, output}
oauth1.request({request})
