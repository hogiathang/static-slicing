const onRouteUpdate = (location, prevLocation) => {
  if (!maybeRedirect(location.pathname)) {
    apiRunner(`onRouteUpdate`, { location, prevLocation })
    if (
      process.env.GATSBY_QUERY_ON_DEMAND &&
      process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR === `true`
    ) {
      emitter.emit(`onRouteUpdate`, { location, prevLocation })
    }
  }
}
!maybeRedirect(location.pathname)
apiRunner(`onRouteUpdate`, { location, prevLocation })
process.env.GATSBY_QUERY_ON_DEMAND &&
      process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR === `true`
process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR === `true`
emitter.emit(`onRouteUpdate`, { location, prevLocation })
