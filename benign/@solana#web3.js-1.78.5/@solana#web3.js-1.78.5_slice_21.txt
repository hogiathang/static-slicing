ClientBrowser.prototype.request = function(method, params, id, callback) {
    const self = this;
    let request = null;

    // is this a batch request?
    const isBatch = Array.isArray(method) && typeof params === 'function';

    if (this.options.version === 1 && isBatch) {
      throw new TypeError('JSON-RPC 1.0 does not support batching');
    }

    // is this a raw request?
    const isRaw = !isBatch && method && typeof method === 'object' && typeof params === 'function';

    if(isBatch || isRaw) {
      callback = params;
      request = method;
    } else {
      if(typeof id === 'function') {
        callback = id;
        // specifically undefined because "null" is a notification request
        id = undefined;
      }

      const hasCallback = typeof callback === 'function';

      try {
        request = generateRequest(method, params, id, {
          generator: this.options.generator,
          version: this.options.version,
          notificationIdNull: this.optio...
const self = this
let request = null
const isBatch = Array.isArray(method) && typeof params === 'function'
this.options.version === 1 && isBatch
throw new TypeError('JSON-RPC 1.0 does not support batching');
const isRaw = !isBatch && method && typeof method === 'object' && typeof params === 'function'
isBatch || isRaw
callback = params
request = method
typeof id === 'function'
callback = id
id = undefined
const hasCallback = typeof callback === 'function'
request = generateRequest(method, params, id, {
          generator: this.options.generator,
          version: this.options.version,
          notificationIdNull: this.options.notificationIdNull,
        })
_tmp_2105.generator = this.options.generator
_tmp_2105.version = this.options.version
_tmp_2105.notificationIdNull = this.options.notificationIdNull
throw err;
!hasCallback
message = JSON.stringify(request, this.options.replacer)
