function buildChecksumMap = function buildChecksumMap(file, fileOffset, logger) {
    const checksumToOffset = new Map();
    const checksumToSize = new Map();
    let offset = fileOffset;
    for (let i = 0; i < file.checksums.length; i++) {
        const checksum = file.checksums[i];
        const size = file.sizes[i];
        const existing = checksumToSize.get(checksum);
        if (existing === undefined) {
            checksumToOffset.set(checksum, offset);
            checksumToSize.set(checksum, size);
        }
        else if (logger.debug != null) {
            const sizeExplanation = existing === size ? "(same size)" : `(size: ${existing}, this size: ${size})`;
            logger.debug(`${checksum} duplicated in blockmap ${sizeExplanation}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`);
        }
        offset += size;
    }
    return { checksumToOffset, checksumToOldSize: checksumToSize };
}
const checksumToOffset = new Map()
const checksumToSize = new Map()
let offset = fileOffset
i < file.checksums.length
const checksum = file.checksums[i]
const size = file.sizes[i]
const existing = checksumToSize.get(checksum)
existing === undefined
checksumToOffset.set(checksum, offset)
checksumToSize.set(checksum, size)
logger.debug != null
existing === size ? "(same size)" : <operator>.formatString("(size: ", existing, ", this size: ", size, ")")
<operator>.formatString("", checksum, " duplicated in blockmap ", sizeExplanation, ", it doesn't lead to broken differential downloader, just corresponding block will be skipped)")
offset += size
