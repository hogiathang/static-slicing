function process = function process(filename, source) {
        try {
            if (util.isString(source) && source.charAt(0) === "{")
                source = JSON.parse(source);
            if (!util.isString(source))
                self.setOptions(source.options).addJSON(source.nested);
            else {
                parse.filename = filename;
                var parsed = parse(source, self, options),
                    resolved,
                    i = 0;
                if (parsed.imports)
                    for (; i < parsed.imports.length; ++i)
                        if (resolved = getBundledFileName(parsed.imports[i]) || self.resolvePath(filename, parsed.imports[i]))
                            fetch(resolved);
                if (parsed.weakImports)
                    for (i = 0; i < parsed.weakImports.length; ++i)
                        if (resolved = getBundledFileName(parsed.weakImports[i]) || self.resolvePath(filename, parsed.weakImports[i]))
                            fetch(...
util.isString(source) && source.charAt(0) === "{"
source = JSON.parse(source)
!util.isString(source)
parse.filename = filename
var parsed = parse(source, self, options)
var i = 0
parsed.imports
i < parsed.imports.length
resolved = getBundledFileName(parsed.imports[i]) || self.resolvePath(filename, parsed.imports[i])
fetch(resolved)
