function processInputFile = function processInputFile () {
        var fs = require('fs');
        var path = require('path');

        // getting raw files
        var lex;
        if (opts.lexfile) {
            lex = fs.readFileSync(path.normalize(opts.lexfile), 'utf8');
        }
        var raw = fs.readFileSync(path.normalize(opts.file), 'utf8');

        // making best guess at json mode
        opts.json = path.extname(opts.file) === '.json' || opts.json;

        // setting output file name and module name based on input file name
        // if they aren't specified.
        var name = path.basename((opts.outfile || opts.file));

        name = name.replace(/\..*$/g, '');

        opts.outfile = opts.outfile || (name + '.js');
        if (!opts.moduleName && name) {
            opts.moduleName = name.replace(/-\w/g,
                    function (match) {
                    return match.charAt(1).toUpperCase();
                });
        }

        var parser = processGrammar(raw, lex, opts);
       ...
var fs = require('fs')
var path = require('path')
opts.lexfile
lex = fs.readFileSync(path.normalize(opts.lexfile), 'utf8')
var raw = fs.readFileSync(path.normalize(opts.file), 'utf8')
opts.json = path.extname(opts.file) === '.json' || opts.json
var name = path.basename((opts.outfile || opts.file))
name = name.replace(/\..*$/g, '')
opts.outfile = opts.outfile || (name + '.js')
!opts.moduleName && name
opts.moduleName = name.replace(/-\w/g,
                    function (match) {
                    return match.charAt(1).toUpperCase();
                })
<lambda>1
var parser = processGrammar(raw, lex, opts)
fs.writeFileSync(opts.outfile, parser)
