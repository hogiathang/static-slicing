function parse = function parse (string) {
  if (!string || typeof string !== 'string') {
    throw new TypeError('argument string is required')
  }

  var match = DISPOSITION_TYPE_REGEXP.exec(string)

  if (!match) {
    throw new TypeError('invalid type format')
  }

  // normalize type
  var index = match[0].length
  var type = match[1].toLowerCase()

  var key
  var names = []
  var params = {}
  var value

  // calculate index to start at
  index = PARAM_REGEXP.lastIndex = match[0].substr(-1) === ';'
    ? index - 1
    : index

  // match parameters
  while ((match = PARAM_REGEXP.exec(string))) {
    if (match.index !== index) {
      throw new TypeError('invalid parameter format')
    }

    index += match[0].length
    key = match[1].toLowerCase()
    value = match[2]

    if (names.indexOf(key) !== -1) {
      throw new TypeError('invalid duplicate parameter')
    }

    names.push(key)

    if (key.indexOf('*') + 1 === key.length) {
      // decode extended value
      key = key.slice(0, -...
!string || typeof string !== 'string'
throw new TypeError('argument string is required')
var match = DISPOSITION_TYPE_REGEXP.exec(string)
!match
throw new TypeError('invalid type format')
var index = match[0].length
var type = match[1].toLowerCase()
__ecma.Array.factory()
var params = {}
index = PARAM_REGEXP.lastIndex = match[0].substr(-1) === ';'
    ? index - 1
    : index
index - 1
match = PARAM_REGEXP.exec(string)
match.index !== index
throw new TypeError('invalid parameter format')
index += match[0].length
(_tmp_20 = match[1]).toLowerCase
value = match[2]
names.indexOf(key) !== -1
throw new TypeError('invalid duplicate parameter')
names.push(key)
key.indexOf('*') + 1 === key.length
key = key.slice(0, -1)
value = decodefield(value)
params[key] = value
continue
typeof params[key] === 'string'
continue
value[0] === '"'
value = value
        .substr(1, value.length - 2)
        .replace(QESC_REGEXP, '$1')
value.length - 2
"$1"
params[key] = value
