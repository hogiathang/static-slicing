responsePromise.promise(function (resolve, reject) {
		/*jshint maxcomplexity:20 */

		var client, method, url, headers, entity, headerName, response, XHR;

		request = typeof request === 'string' ? { path: request } : request || {};
		response = { request: request };

		if (request.canceled) {
			response.error = 'precanceled';
			reject(response);
			return;
		}

		XHR = request.engine || XMLHttpRequest;
		if (!XHR) {
			reject({ request: request, error: 'xhr-not-available' });
			return;
		}

		entity = request.entity;
		request.method = request.method || (entity ? 'POST' : 'GET');
		method = request.method;
		url = response.url = request.path || '';

		try {
			client = response.raw = new XHR();

			// mixin extra request properties before and after opening the request as some properties require being set at different phases of the request
			safeMixin(client, request.mixin);
			client.open(method, url, true);
			safeMixin(client, request.mixin);

			headers = request.headers;
	...
request = typeof request === 'string' ? { path: request } : request || {}
response = { request: request }
request.canceled
XHR = request.engine || XMLHttpRequest
!XHR
entity = request.entity
request.method = request.method || (entity ? 'POST' : 'GET')
method = request.method
url = response.url = request.path || ''
client = response.raw = new XHR()
safeMixin(client, request.mixin)
client.open(method, url, true)
safeMixin(client, request.mixin)
headers = request.headers
_iterator_0 = <operator>.iterator(headers)
headerName === 'Content-Type' && headers[headerName] === 'multipart/form-data'
continue;
client.setRequestHeader(headerName, headers[headerName])
request.canceled = false
request.cancel = function cancel() {
				request.canceled = true;
				client.abort();
				reject(response);
			}
client.onreadystatechange = function (/* e */) {
				if (request.canceled) { return; }
				if (client.readyState === (XHR.DONE || 4)) {
					response.status = {
						code: client.status,
						text: client.statusText
					};
					response.headers = parseHeaders(client.getAllResponseHeaders());
					response.entity = client.responseText;

					// #125 -- Sometimes IE8-9 uses 1223 instead of 204
					// http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request
					if (response.status.code === 1223) {
						response.status.code = 204;
					}

					if (response.status.code > 0) {
						// check status code as readystatechange fires before error event
						resolve(response);
					}
					else {
						// give the error callback a chance to fire before resolving
						// requests for file:// URLs do not have a status code
						setTimeout(function () {
							resolve(response);
						}, 0);
					}
				}
			}
client.onerror = function (/* e */) {
					response.error = 'loaderror';
					reject(response);
				}
client.send(entity)
