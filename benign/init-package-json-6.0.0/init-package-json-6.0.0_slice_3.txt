function init = async function init (dir, input = def, c = {}) {
  const config = getConfig(c)
  const yes = isYes(config)
  const packageFile = path.resolve(dir, 'package.json')

  const pkg = await readPkgJson(packageFile)

  if (!semver.valid(pkg.version)) {
    delete pkg.version
  }

  // make sure that the input is valid. if not, use the default
  const pzData = await promzard(path.resolve(input), {
    yes,
    config,
    filename: packageFile,
    dirname: path.dirname(packageFile),
    basename: path.basename(path.dirname(packageFile)),
    package: pkg,
  }, { backupFile: def })

  for (const [k, v] of Object.entries(pzData)) {
    if (v != null) {
      pkg[k] = v
    }
  }

  const pkgExtras = await readPkgJson(packageFile, pkg)

  // turn the objects into somewhat more humane strings.
  if (pkgExtras.author) {
    pkgExtras.author = stringifyPerson(pkgExtras.author)
  }

  for (const set of ['maintainers', 'contributors']) {
    if (Array.isArray(pkgExtras[set])) {
      pkgExtras[set...
const config = getConfig(c)
const yes = isYes(config)
const packageFile = path.resolve(dir, 'package.json')
const pkg = await readPkgJson(packageFile)
!semver.valid(pkg.version)
delete pkg.version
const pzData = await promzard(path.resolve(input), {
    yes,
    config,
    filename: packageFile,
    dirname: path.dirname(packageFile),
    basename: path.basename(path.dirname(packageFile)),
    package: pkg,
  }, { backupFile: def })
_tmp_1.yes = yes
_tmp_1.config = config
_tmp_1.filename = packageFile
_tmp_1.dirname = path.dirname(packageFile)
_tmp_1.basename = path.basename(path.dirname(packageFile))
_tmp_1.package = pkg
_tmp_2.backupFile = def
_iterator_0 = <operator>.iterator(Object.entries(pzData))
v != null
pkg[k] = v
const pkgExtras = await readPkgJson(packageFile, pkg)
pkgExtras.author
pkgExtras.author = stringifyPerson(pkgExtras.author)
_iterator_1 = <operator>.iterator(['maintainers', 'contributors'])
Array.isArray(pkgExtras[set])
pkgExtras[set] = pkgExtras[set].map(stringifyPerson)
delete pkgExtras.readme
delete pkgExtras.readmeFilename
delete pkgExtras._id
delete pkgExtras.gitHead
!pkgExtras.repository
delete pkgExtras.repository
!pkgExtras.description
pkgExtras.description = pzData.description
pkgExtras.dependencies
pkgExtras.optionalDependencies
_iterator_2 = <operator>.iterator(Object.keys(pkgExtras.optionalDependencies))
delete pkgExtras.dependencies[name]
Object.keys(pkgExtras.dependencies).length === 0
delete pkgExtras.dependencies
const stringified = JSON.stringify(pkgExtras, null, 2) + '\n'
const msg = util.format('%s:\n\n%s\n', packageFile, stringified)
const write = () => fs.writeFile(packageFile, stringified, 'utf8')
await write()
!config.get('silent')
