defineGetter(req, 'hostname', function hostname() {
    var host = this.get('X-Forwarded-Host');

    if (!host) {
        host = this.get('Host');
    }

    if (!host) {
        return undefined;
    }

    var offset = host[0] === '[' ? host.indexOf(']') + 1 : 0;
    var index = host.indexOf(':', offset);

    return ~index ? host.substring(0, index) : host;
})
var host = this.get('X-Forwarded-Host')
!host
host = this.get('Host')
