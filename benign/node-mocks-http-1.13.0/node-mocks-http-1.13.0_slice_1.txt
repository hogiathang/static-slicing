defineGetter(req, 'subdomains', function subdomains() {
    var hostname = this.hostname;

    if (!hostname) {
        return [];
    }

    var offset = this.app.get('subdomain offset');
    var domains = !isIP(hostname) ? hostname.split('.').reverse() : [hostname];

    return domains.slice(offset);
})
var hostname = this.hostname
!hostname
var offset = this.app.get('subdomain offset')
