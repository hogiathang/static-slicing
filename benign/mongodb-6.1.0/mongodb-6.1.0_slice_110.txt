command(
    ns: MongoDBNamespace,
    command: Document,
    options: CommandOptions | undefined,
    callback: Callback
  ): void {
    let cmd = { ...command };

    const readPreference = getReadPreference(options);
    const shouldUseOpMsg = supportsOpMsg(this);
    const session = options?.session;

    let clusterTime = this.clusterTime;

    if (this.serverApi) {
      const { version, strict, deprecationErrors } = this.serverApi;
      cmd.apiVersion = version;
      if (strict != null) cmd.apiStrict = strict;
      if (deprecationErrors != null) cmd.apiDeprecationErrors = deprecationErrors;
    }

    if (hasSessionSupport(this) && session) {
      if (
        session.clusterTime &&
        clusterTime &&
        session.clusterTime.clusterTime.greaterThan(clusterTime.clusterTime)
      ) {
        clusterTime = session.clusterTime;
      }

      const err = applySession(session, cmd, options);
      if (err) {
        return callback(err);
      }
    } else if (session...
let cmd = { ...command }
const readPreference = getReadPreference(options)
const shouldUseOpMsg = supportsOpMsg(this)
const session = options?.session
let clusterTime = this.clusterTime
this.serverApi
deprecationErrors = _tmp_53.deprecationErrors
cmd.apiVersion = version
cmd.apiStrict = strict
cmd.apiDeprecationErrors = deprecationErrors
hasSessionSupport(this) && session
session.clusterTime &&
        clusterTime &&
        session.clusterTime.clusterTime.greaterThan(clusterTime.clusterTime)
session.clusterTime.clusterTime.greaterThan(clusterTime.clusterTime)
clusterTime = session.clusterTime
const err = applySession(session, cmd, options)
session.explicit
cmd.$clusterTime = clusterTime
isSharded(this) && !shouldUseOpMsg && readPreference && readPreference.mode !== 'primary'
cmd = {
        $query: cmd,
        $readPreference: readPreference.toJSON()
      }
_tmp_56.$query = cmd
_tmp_56.$readPreference = readPreference.toJSON()
const commandOptions: Document = Object.assign(
      {
        numberToSkip: 0,
        numberToReturn: -1,
        checkKeys: false,
        // This value is not overridable
        secondaryOk: readPreference.secondaryOk()
      },
      options
    )
_tmp_57.numberToSkip = 0
_tmp_57.numberToReturn = -1
_tmp_57.checkKeys = false
_tmp_57.secondaryOk = readPreference.secondaryOk()
<operator>.formatString("", ns.db, ".$cmd")
const message = shouldUseOpMsg
      ? new Msg(cmdNs, cmd, commandOptions)
      : new Query(cmdNs, cmd, commandOptions)
new Msg(cmdNs, cmd, commandOptions)
new Query(cmdNs, cmd, commandOptions)
