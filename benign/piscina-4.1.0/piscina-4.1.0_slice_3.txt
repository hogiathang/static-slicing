function getHandler = async function getHandler (filename : string, name : string) : Promise<Function | null> {
  let handler = handlerCache.get(`${filename}/${name}`);
  if (handler !== undefined) {
    return handler;
  }

  try {
    // With our current set of TypeScript options, this is transpiled to
    // `require(filename)`.
    handler = await import(filename);
    if (typeof handler !== 'function') {
      handler = await ((handler as any)[name]);
    }
  } catch {}
  if (typeof handler !== 'function') {
    handler = await getImportESM()(pathToFileURL(filename).href);
    if (typeof handler !== 'function') {
      handler = await ((handler as any)[name]);
    }
  }
  if (typeof handler !== 'function') {
    return null;
  }

  // Limit the handler cache size. This should not usually be an issue and is
  // only provided for pathological cases.
  if (handlerCache.size > 1000) {
    const [[key]] = handlerCache;
    handlerCache.delete(key);
  }

  handlerCache.set(`${filename}/${name}`, handler)...
let handler = handlerCache.get(`${filename}/${name}`)
handler !== undefined
handler = await import(filename)
typeof handler !== 'function'
handler = await ((handler as any)[name])
typeof handler !== 'function'
handler = await getImportESM()(pathToFileURL(filename).href)
typeof handler !== 'function'
handler = await ((handler as any)[name])
typeof handler !== 'function'
handlerCache.size > 1000
_tmp_2 = __ecma.Array.factory()
handlerCache.delete(key)
