function run = function run (cliOptionsOrConfig, done) {
  cliOptionsOrConfig = cliOptionsOrConfig || {}
  done = helper.isFunction(done) ? done : process.exit

  let config
  if (cliOptionsOrConfig instanceof cfg.Config) {
    config = cliOptionsOrConfig
  } else {
    logger.setupFromConfig({
      colors: cliOptionsOrConfig.colors,
      logLevel: cliOptionsOrConfig.logLevel
    })
    const deprecatedCliOptionsMessage =
      'Passing raw CLI options to `runner(config, done)` is deprecated. Use ' +
      '`parseConfig(configFilePath, cliOptions, {promiseConfig: true, throwErrors: true})` ' +
      'to prepare a processed `Config` instance and pass that as the ' +
      '`config` argument instead.'
    log.warn(deprecatedCliOptionsMessage)
    try {
      config = cfg.parseConfig(
        cliOptionsOrConfig.configFile,
        cliOptionsOrConfig,
        {
          promiseConfig: false,
          throwErrors: true
        }
      )
    } catch (parseConfigError) {
      // TODO: change how `do...
cliOptionsOrConfig = cliOptionsOrConfig || {}
done = helper.isFunction(done) ? done : process.exit
cliOptionsOrConfig instanceof cfg.Config
config = cliOptionsOrConfig
logger.setupFromConfig({
      colors: cliOptionsOrConfig.colors,
      logLevel: cliOptionsOrConfig.logLevel
    })
_tmp_4.colors = cliOptionsOrConfig.colors
_tmp_4.logLevel = cliOptionsOrConfig.logLevel
const deprecatedCliOptionsMessage =
      'Passing raw CLI options to `runner(config, done)` is deprecated. Use ' +
      '`parseConfig(configFilePath, cliOptions, {promiseConfig: true, throwErrors: true})` ' +
      'to prepare a processed `Config` instance and pass that as the ' +
      '`config` argument instead.'
'Passing raw CLI options to `runner(config, done)` is deprecated. Use ' +
      '`parseConfig(configFilePath, cliOptions, {promiseConfig: true, throwErrors: true})` ' +
      'to prepare a processed `Config` instance and pass that as the ' +
      '`config` argument instead.'
"`parseConfig(configFilePath, cliOptions, {promiseConfig: true, throwErrors: true})` "
"to prepare a processed `Config` instance and pass that as the "
"`config` argument instead."
log.warn(deprecatedCliOptionsMessage)
config = cfg.parseConfig(
        cliOptionsOrConfig.configFile,
        cliOptionsOrConfig,
        {
          promiseConfig: false,
          throwErrors: true
        }
      )
cliOptionsOrConfig.configFile
_tmp_5.promiseConfig = false
_tmp_5.throwErrors = true
done(1)
let exitCode = 1
const emitter = new EventEmitter()
const options = {
    hostname: config.hostname,
    path: config.urlRoot + 'run',
    port: config.port,
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    lookup
  }
_tmp_7.hostname = config.hostname
_tmp_7.path = config.urlRoot + 'run'
_tmp_7.port = config.port
_tmp_7.method = "POST"
_tmp_7.headers = {
      'Content-Type': 'application/json'
    }
_tmp_8.Content-Type = "application/json"
_tmp_7.lookup = lookup
const request = http.request(options, function (response) {
    response.on('data', function (buffer) {
      const parsedResult = parseExitCode(buffer, exitCode, config.failOnEmptyTestSuite)
      exitCode = parsedResult.exitCode
      emitter.emit('progress', parsedResult.buffer)
    })

    response.on('end', () => done(exitCode))
  })
request.on('error', function (e) {
    if (e.code === 'ECONNREFUSED') {
      log.error('There is no server listening on port %d', options.port)
      done(1, e.code)
    } else {
      throw e
    }
  })
request.end(JSON.stringify({
    args: config.clientArgs,
    removedFiles: config.removedFiles,
    changedFiles: config.changedFiles,
    addedFiles: config.addedFiles,
    refresh: config.refresh,
    colors: config.colors
  }))
_tmp_9.args = config.clientArgs
_tmp_9.removedFiles = config.removedFiles
_tmp_9.changedFiles = config.changedFiles
_tmp_9.addedFiles = config.addedFiles
_tmp_9.refresh = config.refresh
_tmp_9.colors = config.colors
