function extract = function extract(buffer, bitIndex, bitLength, defaultBit) {
  if (bitLength < 0 || bitLength > 32) {
    throw new Error("Bad value for bitLength.");
  }

  if (defaultBit === undefined) {
    defaultBit = 0;
  } else if (defaultBit !== 0 && defaultBit !== 1) {
    throw new Error("Bad value for defaultBit.");
  }

  var defaultByte = defaultBit * 0xff;
  var result = 0; // All starts are inclusive. The {endByte, endBit} pair is exclusive, but
  // if endBit !== 0, then endByte is inclusive.

  var lastBit = bitIndex + bitLength;
  var startByte = Math.floor(bitIndex / 8);
  var startBit = bitIndex % 8;
  var endByte = Math.floor(lastBit / 8);
  var endBit = lastBit % 8;

  if (endBit !== 0) {
    // `(1 << endBit) - 1` is the mask of all bits up to but not including
    // the endBit.
    result = get(endByte) & (1 << endBit) - 1;
  }

  while (endByte > startByte) {
    endByte--;
    result = result << 8 | get(endByte);
  }

  result >>>= startBit;
  return result;

  function ge...
bitLength < 0 || bitLength > 32
throw new Error("Bad value for bitLength.");
defaultBit === undefined
defaultBit = 0
defaultBit !== 0 && defaultBit !== 1
throw new Error("Bad value for defaultBit.");
var defaultByte = defaultBit * 0xff
var result = 0
var lastBit = bitIndex + bitLength
var startByte = Math.floor(bitIndex / 8)
var startBit = bitIndex % 8
var endByte = Math.floor(lastBit / 8)
var endBit = lastBit % 8
endBit !== 0
function get = function get(index) {
    var result = buffer[index];
    return result === undefined ? defaultByte : result;
  }
