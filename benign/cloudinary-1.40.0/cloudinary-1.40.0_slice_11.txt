function url = function url(public_id) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var signature = void 0,
      source_to_sign = void 0;
  utils.patchFetchFormat(options);
  var type = consumeOption(options, "type", null);
  var transformation = utils.generate_transformation_string(options);

  var resource_type = consumeOption(options, "resource_type", "image");
  var version = consumeOption(options, "version");
  var force_version = consumeOption(options, "force_version", config().force_version);
  if (force_version == null) {
    force_version = true;
  }
  var long_url_signature = !!consumeOption(options, "long_url_signature", config().long_url_signature);
  var format = consumeOption(options, "format");
  var shorten = consumeOption(options, "shorten", config().shorten);
  var sign_url = consumeOption(options, "sign_url", config().sign_url);
  var api_secret = consumeOption(options, "api_secret", config().api_secret);
  var url_suffix = consum...
var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}
var signature = void 0
var source_to_sign = void 0
utils.patchFetchFormat(options)
var type = consumeOption(options, "type", null)
var transformation = utils.generate_transformation_string(options)
var resource_type = consumeOption(options, "resource_type", "image")
var version = consumeOption(options, "version")
var force_version = consumeOption(options, "force_version", config().force_version)
force_version == null
force_version = true
var long_url_signature = !!consumeOption(options, "long_url_signature", config().long_url_signature)
var format = consumeOption(options, "format")
var shorten = consumeOption(options, "shorten", config().shorten)
var sign_url = consumeOption(options, "sign_url", config().sign_url)
var api_secret = consumeOption(options, "api_secret", config().api_secret)
var url_suffix = consumeOption(options, "url_suffix")
var use_root_path = consumeOption(options, "use_root_path", config().use_root_path)
var signature_algorithm = consumeOption(options, "signature_algorithm", config().signature_algorithm || DEFAULT_SIGNATURE_ALGORITHM)
signature_algorithm = 'sha256'
var auth_token = consumeOption(options, "auth_token")
auth_token !== false
auth_token = exports.merge(config().auth_token, auth_token)
var preloaded = /^(image|raw)\/([a-z0-9_]+)\/v(\d+)\/([^#]+)$/.exec(public_id)
