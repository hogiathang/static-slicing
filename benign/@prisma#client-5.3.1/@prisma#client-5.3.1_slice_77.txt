function main = async function main() {
  if (process.env.INIT_CWD) {
    process.chdir(process.env.INIT_CWD) // necessary, because npm chooses __dirname as process.cwd()
    // in the postinstall hook
  }

  await createDefaultGeneratedThrowFiles()

  // TODO: consider using the `which` package
  const localPath = getLocalPackagePath()

  // Only execute if !localpath
  const installedGlobally = localPath ? undefined : await isInstalledGlobally()

  // this is needed, so we can find the correct schemas in yarn workspace projects
  const root = findPackageRoot(localPath)

  process.env.PRISMA_GENERATE_IN_POSTINSTALL = root ? root : 'true'

  debug({
    localPath,
    installedGlobally,
    init_cwd: process.env.INIT_CWD,
    PRISMA_GENERATE_IN_POSTINSTALL: process.env.PRISMA_GENERATE_IN_POSTINSTALL,
  })
  try {
    if (localPath) {
      await run('node', [localPath, 'generate', '--postinstall', doubleQuote(getPostInstallTrigger())])
      return
    }
    if (installedGlobally) {
      await run...
process.env.INIT_CWD
process.chdir(process.env.INIT_CWD)
await createDefaultGeneratedThrowFiles()
const localPath = getLocalPackagePath()
const installedGlobally = localPath ? undefined : await isInstalledGlobally()
const root = findPackageRoot(localPath)
process.env.PRISMA_GENERATE_IN_POSTINSTALL = root ? root : 'true'
debug({
    localPath,
    installedGlobally,
    init_cwd: process.env.INIT_CWD,
    PRISMA_GENERATE_IN_POSTINSTALL: process.env.PRISMA_GENERATE_IN_POSTINSTALL,
  })
_tmp_2.localPath = localPath
_tmp_2.installedGlobally = installedGlobally
_tmp_2.init_cwd = process.env.INIT_CWD
_tmp_2.PRISMA_GENERATE_IN_POSTINSTALL = process.env.PRISMA_GENERATE_IN_POSTINSTALL
