function resolve = function resolve(obj,options){const prefix=options.prefix||[],pathName="/"+prefix.join("/");function makeContext(appendPath){const newPrefix=appendPath!==void 0?prefix.concat([appendPath]):options.prefix;let postProcessor;const context={preparing:options.preparing,scope:options.scope,documentPath:newPrefix??[],registerPostProcessor(pp){postProcessor=pp},resolve(x,changeOptions){return resolve(x,{...options,...changeOptions,prefix:newPrefix})}};return[context,{postProcess(x){return postProcessor?postProcessor.postProcess(x,context):x}}]}if(prefix.length>200)throw new Error("Unable to resolve object tree with circular reference. Path: "+pathName);const leaveEmpty=options.removeEmpty===!1;if(typeof obj>"u")return;if(obj===null)return null;if(typeof obj=="function")throw new Error(`Trying to resolve a non-data object. Only token are supported for lazy evaluation. Path: ${pathName}. Object: ${obj}`);if(typeof obj=="string"){if(encoding_1.TokenString.forListToken(obj).test())throw new Err...
