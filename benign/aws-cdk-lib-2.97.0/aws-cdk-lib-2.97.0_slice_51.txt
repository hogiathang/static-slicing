function calculateFunctionHash = function calculateFunctionHash(fn,additional=""){const stack=core_1.Stack.of(fn),functionResource=fn.node.defaultChild,{properties,template,logicalId}=resolveSingleResourceProperties(stack,functionResource);let stringifiedConfig;if(core_1.FeatureFlags.of(fn).isEnabled(cx_api_1.LAMBDA_RECOGNIZE_VERSION_PROPS)){const updatedProps=sortFunctionProperties(filterUsefulKeys(properties));stringifiedConfig=JSON.stringify(updatedProps)}else{const sorted=sortFunctionProperties(properties);template.Resources[logicalId].Properties=sorted,stringifiedConfig=JSON.stringify(template)}return core_1.FeatureFlags.of(fn).isEnabled(cx_api_1.LAMBDA_RECOGNIZE_LAYER_VERSION)&&(stringifiedConfig=stringifiedConfig+calculateLayersHash(fn._layers)),(0,helpers_internal_1.md5hash)(stringifiedConfig+additional)}
