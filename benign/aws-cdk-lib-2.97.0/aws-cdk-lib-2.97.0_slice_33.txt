const visit=construct=>{const childrenMap=construct.node.children.map(c=>{try{return visit(c)}catch(e){annotations_1.Annotations.of(this).addWarningV2(`@aws-cdk/core:failedToRenderTreeMetadata-${c.node.id}`,`Failed to render tree metadata for node [${c.node.id}]. Reason: ${e}`);return}}).filter(child=>child!==void 0).reduce((map,child)=>Object.assign(map,{[child.id]:child}),{}),parent=construct.node.scope,node={id:construct.node.id||"App",path:construct.node.path,parent:parent&&parent.node.path?{id:parent.node.id,path:parent.node.path,constructInfo:(0,runtime_info_1.constructInfoFromConstruct)(parent)}:void 0,children:Object.keys(childrenMap).length===0?void 0:childrenMap,attributes:this.synthAttributes(construct),constructInfo:(0,runtime_info_1.constructInfoFromConstruct)(construct)};return lookup[node.path]=node,node}
