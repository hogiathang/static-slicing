function parse = function parse (string) {
  if (!string) {
    throw new TypeError('argument string is required')
  }

  // support req/res-like objects as argument
  var header = typeof string === 'object'
    ? getcontenttype(string)
    : string

  if (typeof header !== 'string') {
    throw new TypeError('argument string is required to be a string')
  }

  var index = header.indexOf(';')
  var type = index !== -1
    ? header.slice(0, index).trim()
    : header.trim()

  if (!TYPE_REGEXP.test(type)) {
    throw new TypeError('invalid media type')
  }

  var obj = new ContentType(type.toLowerCase())

  // parse parameters
  if (index !== -1) {
    var key
    var match
    var value

    PARAM_REGEXP.lastIndex = index

    while ((match = PARAM_REGEXP.exec(header))) {
      if (match.index !== index) {
        throw new TypeError('invalid parameter format')
      }

      index += match[0].length
      key = match[1].toLowerCase()
      value = match[2]

      if (value.charCodeAt(0) === 0x22 /*...
!string
throw new TypeError('argument string is required')
var header = typeof string === 'object'
    ? getcontenttype(string)
    : string
getcontenttype(string)
typeof header !== 'string'
throw new TypeError('argument string is required to be a string')
var index = header.indexOf(';')
var type = index !== -1
    ? header.slice(0, index).trim()
    : header.trim()
(_tmp_6 = header.slice(0, index)).trim
header.trim()
!TYPE_REGEXP.test(type)
throw new TypeError('invalid media type')
var obj = new ContentType(type.toLowerCase())
index !== -1
PARAM_REGEXP.lastIndex = index
match = PARAM_REGEXP.exec(header)
match.index !== index
throw new TypeError('invalid parameter format')
index += match[0].length
(_tmp_10 = match[1]).toLowerCase
value = match[2]
value.charCodeAt(0) === 0x22
value = value.slice(1, -1)
value.indexOf('\\') !== -1
value = value.replace(QESC_REGEXP, '$1')
obj.parameters[key] = value
