ReplSet.prototype.command = function(ns, cmd, options, callback) {
  if (typeof options === 'function') {
    (callback = options), (options = {}), (options = options || {});
  }

  if (this.state === DESTROYED) return callback(new MongoError(f('topology was destroyed')));
  var self = this;

  // Establish readPreference
  var readPreference = options.readPreference ? options.readPreference : ReadPreference.primary;

  // If the readPreference is primary and we have no primary, store it
  if (
    readPreference.preference === 'primary' &&
    !this.s.replicaSetState.hasPrimary() &&
    this.s.disconnectHandler != null
  ) {
    return this.s.disconnectHandler.add('command', ns, cmd, options, callback);
  } else if (
    readPreference.preference === 'secondary' &&
    !this.s.replicaSetState.hasSecondary() &&
    this.s.disconnectHandler != null
  ) {
    return this.s.disconnectHandler.add('command', ns, cmd, options, callback);
  } else if (
    readPreference.preference !== 'pr...
typeof options === 'function'
options = options || {}
callback(new MongoError(f('topology was destroyed')))
var self = this
var readPreference = options.readPreference ? options.readPreference : ReadPreference.primary
readPreference.preference === 'primary' &&
    !this.s.replicaSetState.hasPrimary() &&
    this.s.disconnectHandler != null
(_tmp_170 = this.s.replicaSetState).hasPrimary
this.s.disconnectHandler != null
readPreference.preference === 'secondary' &&
    !this.s.replicaSetState.hasSecondary() &&
    this.s.disconnectHandler != null
(_tmp_172 = this.s.replicaSetState).hasSecondary
this.s.disconnectHandler != null
readPreference.preference !== 'primary' &&
    !this.s.replicaSetState.hasSecondary() &&
    !this.s.replicaSetState.hasPrimary() &&
    this.s.disconnectHandler != null
(_tmp_174 = this.s.replicaSetState).hasSecondary
(_tmp_175 = this.s.replicaSetState).hasPrimary
this.s.disconnectHandler != null
var server = this.s.replicaSetState.pickServer(readPreference)
!(server instanceof Server)
self.emit('pickedServer', ReadPreference.primary, server)
