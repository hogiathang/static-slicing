todo.push(new Promise((resolve) => {
                const headers = {};
                if (typeof auth !== "undefined") {
                    const encodedAuth = Buffer.from(auth).toString("base64");
                    headers["Authorization"] = `Basic ${encodedAuth}`;
                }
                const req = request(Object.assign({ hostname: url.hostname, method: "GET", path, port: Number(url.port), protocol: url.protocol, timeout, headers: headers }, host.options), once((res) => {
                    resolve({
                        url,
                        res: res.resume(),
                        online: res.statusCode < 300,
                        rtt: Date.now() - start,
                        version: res.headers["x-influxdb-version"],
                    });
                }));
                const fail = once(() => {
                    req.abort();
                    resolve({
                        online: false,
                        res: null,
    ...
const headers = {}
typeof auth !== "undefined"
const encodedAuth = Buffer.from(auth).toString("base64")
<operator>.formatString("Basic ", encodedAuth, "")
const req = request(Object.assign({ hostname: url.hostname, method: "GET", path, port: Number(url.port), protocol: url.protocol, timeout, headers: headers }, host.options), once((res) => {
                    resolve({
                        url,
                        res: res.resume(),
                        online: res.statusCode < 300,
                        rtt: Date.now() - start,
                        version: res.headers["x-influxdb-version"],
                    });
                }))
const fail = once(() => {
                    req.abort();
                    resolve({
                        online: false,
                        res: null,
                        rtt: Infinity,
                        url,
                        version: null,
                    });
                })
typeof req.setTimeout === "function"
req.setTimeout(timeout, () => {
                        fail.call(fail, arguments);
                    })
