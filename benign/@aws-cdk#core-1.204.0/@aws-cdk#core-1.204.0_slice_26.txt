function contentFingerprint = function contentFingerprint(file) {
    const hash = crypto.createHash('sha256');
    const buffer = Buffer.alloc(BUFFER_SIZE);
    // eslint-disable-next-line no-bitwise
    const fd = fs.openSync(file, fs.constants.O_DSYNC | fs.constants.O_RDONLY | fs.constants.O_SYNC);
    let size = 0;
    let isBinary = false;
    let lastStr = '';
    let read = 0;
    try {
        while ((read = fs.readSync(fd, buffer, 0, BUFFER_SIZE, null)) !== 0) {
            const slicedBuffer = buffer.slice(0, read);
            // Detect if file is binary by checking the first 8k bytes for the
            // null character (git like implementation)
            if (size === 0) {
                isBinary = slicedBuffer.indexOf(0) !== -1;
            }
            let dataBuffer = slicedBuffer;
            if (!isBinary) { // Line endings normalization (CRLF -> LF)
                const str = buffer.slice(0, read).toString();
                // We are going to normalize line endings to LF. So if the curre...
const hash = crypto.createHash('sha256')
const buffer = Buffer.alloc(BUFFER_SIZE)
const fd = fs.openSync(file, fs.constants.O_DSYNC | fs.constants.O_RDONLY | fs.constants.O_SYNC)
let size = 0
let isBinary = false
let lastStr = ''
let read = 0
(read = fs.readSync(fd, buffer, 0, BUFFER_SIZE, null)) !== 0
const slicedBuffer = buffer.slice(0, read)
size === 0
isBinary = slicedBuffer.indexOf(0) !== -1
let dataBuffer = slicedBuffer
!isBinary
const str = buffer.slice(0, read).toString()
(_tmp_7 = new RegExp(`${CR}$`)).test
lastStr += str
continue;
const data = lastStr + str
const normalizedData = data.replace(new RegExp(CRLF, 'g'), LF)
dataBuffer = Buffer.from(normalizedData)
lastStr = ''
size += dataBuffer.length
hash.update(dataBuffer)
hash.update(Buffer.from(lastStr))
fs.closeSync(fd)
