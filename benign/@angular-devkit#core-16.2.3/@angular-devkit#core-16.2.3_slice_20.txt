(0, rxjs_1.concat)(this.exists(to), this.exists(from)).pipe((0, rxjs_1.toArray)(), (0, rxjs_1.switchMap)(([existTo, existFrom]) => {
            if (!existFrom) {
                return (0, rxjs_1.throwError)(new exception_1.FileDoesNotExistException(from));
            }
            if (from === to) {
                return rxjs_1.EMPTY;
            }
            if (existTo) {
                return (0, rxjs_1.throwError)(new exception_1.FileAlreadyExistException(to));
            }
            // If we're renaming a file that's been created, shortcircuit to creating the `to` path.
            if (this._filesToCreate.has(from)) {
                this._filesToCreate.delete(from);
                this._filesToCreate.add(to);
                return super.rename(from, to);
            }
            if (this._filesToOverwrite.has(from)) {
                this._filesToOverwrite.delete(from);
                // Recursively call this function. This is so we don't repeat the bottom logic. ...
!existFrom
from === to
(_tmp_70 = this._filesToCreate).has
(_tmp_74 = this._filesToOverwrite).has
(_tmp_78 = this._filesToDelete).has
const maybeTo1 = this._filesToRenameRevert.get(from)
(_tmp_84 = this._filesToRename).delete
(_tmp_85 = this._filesToRenameRevert).delete
from = maybeTo1
(_tmp_86 = this._filesToRename).set
(_tmp_87 = this._filesToRenameRevert).set
this._exists(from)
(_tmp_88 = super).rename
