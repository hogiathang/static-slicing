function getNodes = function getNodes(data, keyMap, isV6) {
    const nodes = new Map();
    Object.entries(data.packages).forEach(([key, snapshot]) => {
        findPackageNames(key, snapshot, data).forEach((packageName) => {
            const rawVersion = findVersion(key, packageName);
            const version = parseBaseVersion(rawVersion, isV6);
            // we don't need to keep duplicates, we can just track the keys
            const existingNode = nodes.get(packageName)?.get(version);
            if (existingNode) {
                keyMap.set(key, existingNode);
                return;
            }
            const node = {
                type: 'npm',
                name: version ? `npm:${packageName}@${version}` : `npm:${packageName}`,
                data: {
                    version,
                    packageName,
                    hash: snapshot.resolution?.['integrity'] ||
                        (0, file_hasher_1.hashArray)(snapshot.resolution?.['tarball']
                    ...
const nodes = new Map()
Object.entries(data.packages).forEach(([key, snapshot]) => {
        findPackageNames(key, snapshot, data).forEach((packageName) => {
            const rawVersion = findVersion(key, packageName);
            const version = parseBaseVersion(rawVersion, isV6);
            // we don't need to keep duplicates, we can just track the keys
            const existingNode = nodes.get(packageName)?.get(version);
            if (existingNode) {
                keyMap.set(key, existingNode);
                return;
            }
            const node = {
                type: 'npm',
                name: version ? `npm:${packageName}@${version}` : `npm:${packageName}`,
                data: {
                    version,
                    packageName,
                    hash: snapshot.resolution?.['integrity'] ||
                        (0, file_hasher_1.hashArray)(snapshot.resolution?.['tarball']
                            ? [snapshot.resolution['tarball']]
                            : ...
const hoistedDeps = (0, pnpm_normalizer_1.loadPnpmHoistedDepsDefinition)()
const results = {}
_iterator_0 = <operator>.iterator(nodes.entries())
versionMap.size === 1
hoistedNode = versionMap.values().next().value
const hoistedVersion = getHoistedVersion(hoistedDeps, packageName, isV6)
hoistedNode = versionMap.get(hoistedVersion)
<operator>.formatString("npm:", packageName, "")
versionMap.forEach((node) => {
            results[node.name] = node;
        })
