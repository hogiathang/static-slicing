EventEmitter.prototype.emit = function emit() {
    "use strict";
    var type = arguments[0];
    // If there is no 'error' event listener then throw.
    if (type === 'error') {
        if (!this._events || !this._events.error ||
        isArray(this._events.error) && !this._events.error.length) {
            if (arguments[1] instanceof Error) {
                throw arguments[1]; // Unhandled 'error' event
            } else {
                throw new CasperError("Uncaught, unspecified 'error' event.");
            }
        }
    }

    if (!this._events) {
        return false;
    }
    var handler = this._events[type];
    if (!handler) {
        return false;
    }

    if (typeof handler === 'function') {
        try {
            switch (arguments.length) {
            // fast cases
            case 1:
                handler.call(this);
                break;
            case 2:
                handler.call(this, arguments[1]);
                break;
            case 3:
...
var type = arguments[0]
type === 'error'
!this._events || !this._events.error ||
        isArray(this._events.error) && !this._events.error.length
isArray(this._events.error) && !this._events.error.length
arguments[1] instanceof Error
throw arguments[1];
throw new CasperError("Uncaught, unspecified 'error' event.");
!this._events
var handler = this._events[type]
!handler
typeof handler === 'function'
arguments.length
1
handler.call(this)
break;
2
handler.call(this, arguments[1])
break;
3
handler.call(this, arguments[1], arguments[2])
break;
default:
var l = arguments.length
var args = new Array(l - 1)
var i = 1
args[i - 1] = arguments[i]
handler.apply(this, args)
this.emit('event.error', err)
