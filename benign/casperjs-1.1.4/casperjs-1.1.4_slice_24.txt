EventEmitter.prototype.prependListener = function prependListener(type, listener) {
    "use strict";
    if (typeof listener !== 'function') {
        throw new CasperError('addListener only takes instances of Function');
    }

    if (!this._events) {
        this._events = {};
    }

    // To avoid recursion in the case that type == "newListeners"! Before
    // adding it to the listeners, first emit "newListeners".
    this.emit('newListener', type, listener);

    if (!this._events[type]) {
        // Optimize the case of one listener. Don't need the extra array object.
        this._events[type] = listener;
    } else if (isArray(this._events[type])) {

        // If we've already got an array, just append.
        this._events[type].unshift(listener);

        // Check for listener leak
        if (!this._events[type].warned) {
            var m;
            if (typeof this._maxListeners !== 'undefined') {
                m = this._maxListeners;
            } else {
       ...
typeof listener !== 'function'
throw new CasperError('addListener only takes instances of Function');
!this._events
this._events = {}
this.emit('newListener', type, listener)
