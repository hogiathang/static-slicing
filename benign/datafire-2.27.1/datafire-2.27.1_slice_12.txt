new Promise(function (resolve, reject) {
      var acct = context.accounts[integID];
      var form = {
        client_id: acct.client_id,
        client_secret: acct.client_secret,
        redirect_uri: acct.redirect_uri,
        grant_type: grantType
      };
      if (grantType === 'authorization_code') {
        form.code = input.code;
      } else {
        form.refresh_token = acct.refresh_token;
      }
      request.post({
        url: sec.oauth.tokenUrl,
        headers: { 'Accept': 'application/json' },
        form: form
      }, function (err, resp, body) {
        if (err) {
          return reject(err);
        } else if (resp.statusCode >= 300) {
          var message = 'Token error ' + resp.statusCode;
          try {
            body = JSON.parse(body);
          } catch (e) {}
          if (body && body.error) {
            message += ' ' + body.error;
            if (body.error_description) {
              message += ': ' + body.error_description;
            }
  ...
var acct = context.accounts[integID]
var form = {
        client_id: acct.client_id,
        client_secret: acct.client_secret,
        redirect_uri: acct.redirect_uri,
        grant_type: grantType
      }
_tmp_28.client_id = acct.client_id
_tmp_28.client_secret = acct.client_secret
_tmp_28.redirect_uri = acct.redirect_uri
_tmp_28.grant_type = grantType
grantType === 'authorization_code'
form.code = input.code
form.refresh_token = acct.refresh_token
request.post({
        url: sec.oauth.tokenUrl,
        headers: { 'Accept': 'application/json' },
        form: form
      }, function (err, resp, body) {
        if (err) {
          return reject(err);
        } else if (resp.statusCode >= 300) {
          var message = 'Token error ' + resp.statusCode;
          try {
            body = JSON.parse(body);
          } catch (e) {}
          if (body && body.error) {
            message += ' ' + body.error;
            if (body.error_description) {
              message += ': ' + body.error_description;
            }
          }
          return reject(new Error(message));
        } else {
          resolve(JSON.parse(body));
        }
      })
