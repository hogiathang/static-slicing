getPaths(path, relPath, extension).then(paths => {
        const suffix = paths.ext
        const state = Object.assign({}, options, ctx.state || {}, locals)
        // deep copy partials
        state.partials = Object.assign(Object.create(null), options.partials || {})
        if (debug.enabled) debug('render `%s` with %s', paths.rel, JSON.stringify(state, bigIntReplacer()))
        ctx.type = 'text/html'

        if (isHtml(suffix) && !map) {
          return send(ctx, paths.rel, {
            root: path
          })
        } else {
          const engineName = map && map[suffix] ? map[suffix] : suffix

          const render = engineSource[engineName]

          if (!engineName || !render)
            return Promise.reject(
              new Error(`Engine not found for the ".${suffix}" file extension`)
            )

          return render(resolve(path, paths.rel), state).then(html => {
            // since pug has deprecated `pretty` option
            // we'll use the `prett...
const suffix = paths.ext
const state = Object.assign({}, options, ctx.state || {}, locals)
state.partials = Object.assign(Object.create(null), options.partials || {})
debug('render `%s` with %s', paths.rel, JSON.stringify(state, bigIntReplacer()))
ctx.type = 'text/html'
isHtml(suffix) && !map
send(ctx, paths.rel, {
            root: path
          })
_tmp_8.root = path
