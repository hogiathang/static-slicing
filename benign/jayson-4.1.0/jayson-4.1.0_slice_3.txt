Client.prototype.request = function(method, params, id, callback) {
  const self = this;
  let request = null;

  // is this a batch request?
  const isBatch = Array.isArray(method) && typeof(params) === 'function';

  if (this.options.version === 1 && isBatch) {
    throw new TypeError('JSON-RPC 1.0 does not support batching');
  }

  // is this a raw request?
  const isRaw = !isBatch && method && typeof(method) === 'object' && typeof(params) === 'function';

  if(isBatch || isRaw) {
    callback = params;
    request = method;
  } else {
    if(typeof(id) === 'function') {
      callback = id;
      // specifically undefined because "null" is a notification request
      id = undefined;
    }

    const hasCallback = typeof(callback) === 'function';

    try {
      request = utils.request(method, params, id, {
        generator: this.options.generator,
        version: this.options.version,
        notificationIdNull: this.options.notificationIdNull,
      });
    } catch(err) {
...
const self = this
let request = null
const isBatch = Array.isArray(method) && typeof(params) === 'function'
this.options.version === 1 && isBatch
throw new TypeError('JSON-RPC 1.0 does not support batching');
const isRaw = !isBatch && method && typeof(method) === 'object' && typeof(params) === 'function'
isBatch || isRaw
typeof(id) === 'function'
callback = id
id = undefined
const hasCallback = typeof(callback) === 'function'
request = utils.request(method, params, id, {
        generator: this.options.generator,
        version: this.options.version,
        notificationIdNull: this.options.notificationIdNull,
      })
