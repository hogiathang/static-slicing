ecModel.eachComponent('bmap', function (bmapModel) {
        const painter = api.getZr().painter;
        const viewportRoot = painter.getViewportRoot();
        if (typeof BMap === 'undefined') {
            throw new Error('BMap api is not loaded');
        }
        Overlay = Overlay || createOverlayCtor();
        if (bmapCoordSys) {
            throw new Error('Only one bmap component can exist');
        }
        let bmap;
        if (!bmapModel.__bmap) {
            // Not support IE8
            let bmapRoot = root.querySelector('.ec-extension-bmap');
            if (bmapRoot) {
                // Reset viewport left and top, which will be changed
                // in moving handler in BMapView
                viewportRoot.style.left = '0px';
                viewportRoot.style.top = '0px';
                root.removeChild(bmapRoot);
            }
            bmapRoot = document.createElement('div');
            bmapRoot.className = 'ec-extension-bmap'...
const painter = api.getZr().painter
const viewportRoot = painter.getViewportRoot()
typeof BMap === 'undefined'
throw new Error('BMap api is not loaded');
Overlay = Overlay || createOverlayCtor()
throw new Error('Only one bmap component can exist');
!bmapModel.__bmap
let bmapRoot = root.querySelector('.ec-extension-bmap')
viewportRoot.style.left = '0px'
viewportRoot.style.top = '0px'
root.removeChild(bmapRoot)
bmapRoot = document.createElement('div')
bmapRoot.className = 'ec-extension-bmap'
bmapRoot.style.cssText = 'position:absolute;width:100%;height:100%'
root.appendChild(bmapRoot)
let mapOptions = bmapModel.get('mapOptions')
mapOptions = zrUtil.clone(mapOptions)
delete mapOptions.mapType
bmap = bmapModel.__bmap = new BMap.Map(bmapRoot, mapOptions)
const overlay = new Overlay(viewportRoot)
bmap.addOverlay(overlay)
painter.getViewportRootOffset = function () {
                return {offsetLeft: 0, offsetTop: 0};
            }
bmap = bmapModel.__bmap
const center = bmapModel.get('center')
