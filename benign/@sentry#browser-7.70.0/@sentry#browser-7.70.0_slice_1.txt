client.on('beforeEnvelope', (envelope) => {
        // if not profiles are in queue, there is nothing to add to the envelope.
        if (!utils.PROFILE_MAP['size']) {
          return;
        }

        const profiledTransactionEvents = utils.findProfiledTransactionsFromEnvelope(envelope);
        if (!profiledTransactionEvents.length) {
          return;
        }

        const profilesToAddToEnvelope = [];

        for (const profiledTransaction of profiledTransactionEvents) {
          const context = profiledTransaction && profiledTransaction.contexts;
          const profile_id = context && context['profile'] && (context['profile']['profile_id'] );

          if (!profile_id) {
            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&
              utils$1.logger.log('[Profiling] cannot find profile for a transaction without a profile context');
            continue;
          }

          // Remove the profile from the transaction context before sending, ...
!utils.PROFILE_MAP['size']
const profiledTransactionEvents = utils.findProfiledTransactionsFromEnvelope(envelope)
!profiledTransactionEvents.length
const profilesToAddToEnvelope = []
_iterator_0 = <operator>.iterator(profiledTransactionEvents)
const context = profiledTransaction && profiledTransaction.contexts
const profile_id = context && context['profile'] && (context['profile']['profile_id'] )
!profile_id
(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&
              utils$1.logger.log('[Profiling] cannot find profile for a transaction without a profile context')
utils$1.logger.log('[Profiling] cannot find profile for a transaction without a profile context')
continue;
context && context['profile']
delete context.profile
const profile = utils.PROFILE_MAP.get(profile_id)
!profile
(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils$1.logger.log(`[Profiling] Could not retrieve profile for transaction: ${profile_id}`)
continue;
utils.PROFILE_MAP.delete(profile_id)
const profileEvent = utils.createProfilingEvent(profile_id, profile, profiledTransaction )
profilesToAddToEnvelope.push(profileEvent)
