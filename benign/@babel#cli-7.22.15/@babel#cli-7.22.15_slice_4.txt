function updateExternalDependencies = function updateExternalDependencies(filename, dependencies) {
  if (!isWatchMode) return;
  const absFilename = _path().resolve(filename);
  const absDependencies = new Set(Array.from(dependencies, dep => _path().resolve(dep)));
  const deps = fileToDeps.get(absFilename);
  if (deps) {
    for (const dep of deps) {
      if (!absDependencies.has(dep)) {
        removeFileDependency(absFilename, dep);
      }
    }
  }
  for (const dep of absDependencies) {
    let deps = depToFiles.get(dep);
    if (!deps) {
      depToFiles.set(dep, deps = new Set());
      if (!hasStarted) {
        watchQueue.add(dep);
      } else {
        watcher.add(dep);
      }
    }
    deps.add(absFilename);
  }
  fileToDeps.set(absFilename, absDependencies);
}
!isWatchMode
const absFilename = _path().resolve(filename)
const absDependencies = new Set(Array.from(dependencies, dep => _path().resolve(dep)))
const deps = fileToDeps.get(absFilename)
