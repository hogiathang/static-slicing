function registerSharedWorker = function registerSharedWorker({
	filename,
	initialData,
	supportedProtocols,
	teardown,
}) {
	const options_ = options.get();

	if (!options_.workerThreads) {
		throw new Error('Shared workers can be used only when worker threads are enabled');
	}

	if (!supportedProtocols.includes('ava-4')) {
		throw new Error(`This version of AVA (${pkg.version}) does not support any of the desired shared worker protocols: ${supportedProtocols.join(',')}`);
	}

	filename = String(filename); // Allow URL instances.

	let worker = workers.get(filename);
	if (worker === undefined) {
		worker = createSharedWorker(filename, initialData, async () => {
			// Run possibly asynchronous teardown functions serially, in reverse
			// order. Any error will crash the worker.
			const teardownFns = workerTeardownFns.get(worker);
			if (teardownFns !== undefined) {
				for await (const fn of [...teardownFns].reverse()) {
					await fn();
				}
			}
		});
		workers.set(filename, worker);
	}

	if (teardown !== und...
filename = param1_0.filename
initialData = param1_0.initialData
supportedProtocols = param1_0.supportedProtocols
teardown = param1_0.teardown
const options_ = options.get()
!options_.workerThreads
throw new Error('Shared workers can be used only when worker threads are enabled');
!supportedProtocols.includes('ava-4')
<operator>.formatString("This version of AVA (", pkg.version, ") does not support any of the desired shared worker protocols: ", supportedProtocols.join(','), "")
filename = String(filename)
let worker = workers.get(filename)
worker === undefined
worker = createSharedWorker(filename, initialData, async () => {
			// Run possibly asynchronous teardown functions serially, in reverse
			// order. Any error will crash the worker.
			const teardownFns = workerTeardownFns.get(worker);
			if (teardownFns !== undefined) {
				for await (const fn of [...teardownFns].reverse()) {
					await fn();
				}
			}
		})
workers.set(filename, worker)
teardown !== undefined
workerTeardownFns.has(worker)
(_tmp_9 = workerTeardownFns.get(worker)).push
